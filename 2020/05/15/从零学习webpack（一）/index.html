<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="从零学习webpack（一）"><meta name="keywords" content><meta name="author" content="舒小琦"><meta name="copyright" content="舒小琦"><title>从零学习webpack（一） | 舒小琦的Blog</title><link rel="shortcut icon" href="/shuliqi.github.io/melody-favicon.ico"><link rel="stylesheet" href="/shuliqi.github.io/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/shuliqi.github.io/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#概念"><span class="toc-number">1.</span> <span class="toc-text">概念</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#入口（entry）"><span class="toc-number">1.1.</span> <span class="toc-text">入口（entry）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#单个入口"><span class="toc-number">1.1.1.</span> <span class="toc-text">单个入口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对象语法"><span class="toc-number">1.1.2.</span> <span class="toc-text">对象语法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#输出（output）"><span class="toc-number">1.2.</span> <span class="toc-text">输出（output）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#loader"><span class="toc-number">1.3.</span> <span class="toc-text">loader</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#使用loader"><span class="toc-number">1.3.1.</span> <span class="toc-text">使用loader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置方式"><span class="toc-number">1.3.2.</span> <span class="toc-text">配置方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#插件（plugin）"><span class="toc-number">1.4.</span> <span class="toc-text">插件（plugin）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#模式（Mode）"><span class="toc-number">1.5.</span> <span class="toc-text">模式（Mode）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#配置"><span class="toc-number">2.</span> <span class="toc-text">配置</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#配置选项"><span class="toc-number">3.</span> <span class="toc-text">配置选项</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#上下文（context）"><span class="toc-number">3.1.</span> <span class="toc-text">上下文（context）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#入口（entry）-1"><span class="toc-number">3.2.</span> <span class="toc-text">入口（entry）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#概念-1"><span class="toc-number">3.3.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Webpack项目"><span class="toc-number">3.4.</span> <span class="toc-text">Webpack项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#安装Webpack"><span class="toc-number">3.4.1.</span> <span class="toc-text">安装Webpack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#packge-json文件的生成"><span class="toc-number">3.4.2.</span> <span class="toc-text">packge.json文件的生成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Webpack打包"><span class="toc-number">3.4.3.</span> <span class="toc-text">Webpack打包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加配置文件"><span class="toc-number">3.4.4.</span> <span class="toc-text">添加配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改packge-json-文件"><span class="toc-number">3.4.5.</span> <span class="toc-text">修改packge.json 文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Webpack打包输出字段"><span class="toc-number">3.4.6.</span> <span class="toc-text">Webpack打包输出字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#打包静态资源"><span class="toc-number">3.4.7.</span> <span class="toc-text">打包静态资源</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#loader-打包图片"><span class="toc-number">3.4.7.1.</span> <span class="toc-text">loader 打包图片</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#占位符的应用"><span class="toc-number">3.4.7.1.1.</span> <span class="toc-text">占位符的应用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#压缩图片"><span class="toc-number">3.4.7.1.2.</span> <span class="toc-text">压缩图片</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#loader-打包样式"><span class="toc-number">3.4.7.2.</span> <span class="toc-text">loader 打包样式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#打包-css文件"><span class="toc-number">3.4.7.2.1.</span> <span class="toc-text">打包.css文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#打包-sass-scss-的文件"><span class="toc-number">3.4.7.2.2.</span> <span class="toc-text">打包.sass , .scss 的文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#css厂商前缀自动添加"><span class="toc-number">3.4.7.2.3.</span> <span class="toc-text">css厂商前缀自动添加</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#css模块化打包"><span class="toc-number">3.4.7.2.4.</span> <span class="toc-text">css模块化打包</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#什么是webpack"><span class="toc-number">4.</span> <span class="toc-text">什么是webpack</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/shuliqi.github.io/img/avatar.png"></div><div class="author-info__name text-center">舒小琦</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/shuliqi.github.io/archives"><span class="pull-left">文章</span><span class="pull-right">34</span></a><a class="author-info-articles__tags article-meta" href="/shuliqi.github.io/tags"><span class="pull-left">标签</span><span class="pull-right">8</span></a><a class="author-info-articles__categories article-meta" href="/shuliqi.github.io/categories"><span class="pull-left">分类</span><span class="pull-right">1</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/shuliqi.github.io/">舒小琦的Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a><a class="site-page" href="/">首页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a><a class="site-page" href="/about">关于我</a></span></div><div id="post-info"><div id="post-title">从零学习webpack（一）</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-05-15</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>在平常的工作中，经常使用到webpack，大多数是脚手架直接帮我们配置好。一直想好好从零开始学习webpack。减少对脚手架的依赖。</p>
<p>那么这篇博客将先学习基础的概念， 然后实践一个项目来加深自己的学习</p>
 <a id="more"></a>
<h1 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h1><p>webpack 是一个用于现在JavaScript 应用程序的静态模块打包工具，当webpack处理应用程序时，会在内部构建一个依赖图，该依赖图对应映射到项目所需的每个模块，最后生成一个或者多个 bundle。</p>
<p>webpack 有一些核心的概念需要理解：</p>
<ul>
<li>入口（entry）</li>
<li>输出（output）</li>
<li>loader</li>
<li>插件（plugin）</li>
<li>模式（mode）</li>
<li>浏览器兼容（browser compatibility）</li>
</ul>
<ul>
<li>环境（environment）</li>
</ul>
<p>下面我们就分别来学习这些模块</p>
<h2 id="入口（entry）"><a href="#入口（entry）" class="headerlink" title="入口（entry）"></a>入口（entry）</h2><p>入口（entry）指示webpack应该使用哪个模块来作为构建其内部依赖图的开始。进入入口起点后，webpack会找出有哪些模块和库是入口起点依赖的。</p>
<p>默认值：    <code>src/index.js</code>. 但是可以在配置文件中配置entry的属性。</p>
<p>webpack配置中有多种方式定义 entry 属性。</p>
<h3 id="单个入口"><a href="#单个入口" class="headerlink" title="单个入口"></a>单个入口</h3><p>用法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">entry: string | [string]</span><br></pre></td></tr></table></figure>
<p>webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	entry: <span class="string">'./path/myproject/src/index.js'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也可以简写如下：</p>
<p>webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	entry: &#123;</span><br><span class="line">		main: <span class="string">'./path/myproject/src/index.js'</span>,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也可以将一个文件路径数组传递给entry属性，这将会创建一个所谓的 <code>multi-main entry</code>。如果想一次性注入多个依赖的文件，并且想它们依赖关系绘制在一个“chunk” 中时， 就可以使用这种方式</p>
<p>webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	entry: [</span><br><span class="line">		<span class="string">'src/1.js'</span>,</span><br><span class="line">		<span class="string">'src/2.js'</span>,</span><br><span class="line">		<span class="string">'src/3.js'</span>,</span><br><span class="line">	],</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'bundle.js'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果你希望通过一个入口为应用程序快速设置webpack配置时候，单一入口的方式就是一个很合适的选择，但是使用这种语法方式来扩展或调整配置的灵活性不大。</p>
<h3 id="对象语法"><a href="#对象语法" class="headerlink" title="对象语法"></a>对象语法</h3><p>用法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">entry: &#123; &lt;entryChunkName&gt; string | [string]&#125; | &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	entry: &#123;</span><br><span class="line">		main: <span class="string">'src/main.js'</span>,</span><br><span class="line">		admin: <span class="string">'src/admin.js'</span>,</span><br><span class="line">    index: <span class="string">'src/index.js'</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对象语法会比较繁琐，但是，这是应用程序中定义入口最可扩展的方式。</p>
<blockquote>
<p>这里的最可扩展是指这些配置可以重复使用，并且与其他配置组合使用。</p>
</blockquote>
<h2 id="输出（output）"><a href="#输出（output）" class="headerlink" title="输出（output）"></a>输出（output）</h2><p>output 属性告诉wbpack 在哪里输出它创建的 bundle，以及如何命名这些文件。</p>
<p>主要输出文件的默认值是<code>./dist/main.js</code>, 其他生成的文件默认放置在<code>./dist</code>文件夹中。</p>
<p><strong>注意：</strong> 即使存在多个 entry 起点，但也只能指定一个 output 配置。</p>
<p>用法：  在webpack 配置中， output属性的最低要求是将它配置成一个对象，然后为输出的文件配置名字(<strong>output.filnename</strong>)</p>
<p>webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	output: &#123;</span><br><span class="line">		filename: <span class="string">'bundle.js'</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个配置将一个单独的 bundle.js 文件输出到 dist 目录中。</p>
<p>如果是多个入口起点， 则应该使用 <strong>占位符</strong> 来确保每一个文件具有唯一的名称。</p>
<ul>
<li>name 如果设置，则为chunk的名称，否则使用chunk的ID </li>
</ul>
<ul>
<li><p>[ id ]:   chunk的ID</p>
</li>
<li><p>[ contenthash ]: 此chunk的hash值只包括该内容类型的元素（受optimization.realContentHash影响</p>
</li>
<li><p>[  chunkhash  ]: 此chunk的hash值，包含该chunk的所有元素</p>
</li>
</ul>
<p>webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	entry: &#123;</span><br><span class="line">		main: <span class="string">'./src/main.js'</span>，</span><br><span class="line">		admin: <span class="string">'./src/admin.js'</span>，</span><br><span class="line">	&#125;,</span><br><span class="line">	output: &#123;</span><br><span class="line">		filename: [name].js,</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这配置最终dist目录：main.js, admin.js</p>
<p>其次 output 属性可配置的字段常用的还有<strong>output.path</strong>字段</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	output: &#123;</span><br><span class="line">		filename: [name].js</span><br><span class="line">		path: path.resolve(__dirname, <span class="string">'/dist'</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="loader"><a href="#loader" class="headerlink" title="loader"></a>loader</h2><p>webpack只能理解javaScript 和 JSON 文件。这是webpack 开箱可用的能力。loader让webpack 能够去处理其他类型的文件，并将它们转换成有效的模块，已供应用使用， 以及被添加到依赖图中，即loader用于对模块的源代码进行转换。loader可以使你在import 或者l ”load加载“模块时预处理文件。</p>
<p>在webpack配置中，loader 有两个属性：</p>
<ul>
<li>test属性， 识别出哪些文件会被转换</li>
<li>use属性，定义在进行转换时，应该使用哪个loader</li>
</ul>
<p>webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exportas = &#123;</span><br><span class="line">	output: &#123;</span><br><span class="line">		filename: [name].js</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="built_in">module</span>: &#123;</span><br><span class="line">		rules: [</span><br><span class="line">			&#123;</span><br><span class="line">				test: <span class="regexp">/\.css$/</span>, </span><br><span class="line">				use: <span class="string">'css-laoder'</span></span><br><span class="line">			&#125;</span><br><span class="line">		]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的配置中， 对一个单独的module 对象定义了 rules 属性、里面的每个配置都包含了两个必须的属性：test。 use 。</p>
<p>这个配置的意思就是：</p>
<blockquote>
<p>当遇到import/ require语句中解析有.css的路径时，在对它进行打包之前，先使用 css-loader 转换一下。</p>
</blockquote>
<p><strong>注意1：</strong>在webpack配置中定义rules时， 要定义在module.rules 中而不是 rules中。 </p>
<p><strong>注意2：</strong>在webpack 中使用正则表达式时， 不给它添加引号。也就是说： /.css$/ 和 “ /.css$/“ 或者 ‘ /.css$/‘ 是不一样的。前者的意思是匹配任何以.css 结尾的文件。而后者指示webpack匹配具有绝对路径’.css’的对单个文件。</p>
<h3 id="使用loader"><a href="#使用loader" class="headerlink" title="使用loader"></a>使用loader</h3><p>在应用程序中使用loader 有三种方式：</p>
<ul>
<li>配置方式（推荐使用）: 在配置文件中指定loader</li>
<li>内联方式 ：在每个import 文语句显示的指定loader</li>
<li>CLI方式：在shell命令中指定它们</li>
</ul>
<h3 id="配置方式"><a href="#配置方式" class="headerlink" title="配置方式"></a>配置方式</h3><p>这种方式是在配置文件中的module.rules中配置。允许webpack配置中配置多个loader。loader从右到左的取值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	<span class="built_in">module</span>: &#123;</span><br><span class="line">		rules: [</span><br><span class="line">			&#123; </span><br><span class="line">				test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">				use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>, <span class="string">'sass-loader'</span>]</span><br><span class="line">			&#125;</span><br><span class="line">		]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个配置表示：匹配所有的.css结尾的文件，先后分别使用 sass-loader, css-loader, style-loader进行转换。</p>
<h2 id="插件（plugin）"><a href="#插件（plugin）" class="headerlink" title="插件（plugin）"></a>插件（plugin）</h2><p>loader 是用于转换某些类型的模块，而插件则可以用于执行范围更广的任务。包括：打包优化，资源管理，注入环境变量等。</p>
<p>使用一个插件，需要require（）它，然后添加在webpack配置中的 plugins 数组中。多数的插件是可以通过选项来自定义的。</p>
<p>由于插件可以携带参数/选项，所以在webpack配置中，向 plugins 属性传入一个 new 实例。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">	plugins: [</span><br><span class="line">		<span class="keyword">new</span> HtmlWebpackPlugin()</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个配置我们使用了一个插件 html-webpack-plugin 这个插件为应用程序生成一个HTML 文件，并且自动注入所有生成的bundle。</p>
<p>插件的用法有两种：</p>
<ul>
<li><p>配置方式</p>
<p>就如上的示例</p>
</li>
<li><p>Node API 方式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>); <span class="comment">// 访问 webpack 运行时(runtime)</span></span><br><span class="line"><span class="keyword">const</span> configuration = <span class="built_in">require</span>(<span class="string">'./webpack.config.js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> compiler = webpack(configuration);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> webpack.ProgressPlugin().apply(compiler);</span><br><span class="line"></span><br><span class="line">compiler.run(<span class="function"><span class="keyword">function</span>(<span class="params">err, stats</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>想要看看 webpack 插件有哪些，可以看看 <a href="https://webpack.docschina.org/plugins/" target="_blank" rel="noopener">插件列表</a>。当然插件列表也不是全的， 有很多插件都是用户自己上传的，可以的话， 也可以到npm 上面搜 webpack等字样。</p>
<h2 id="模式（Mode）"><a href="#模式（Mode）" class="headerlink" title="模式（Mode）"></a>模式（Mode）</h2><p>通过选择 development, production，none 之中的一个来设置 mode 参数，来启用webpack 内置在相应环境下的优化， 默认值： production。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">	mode: &apos;production&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者也可以在CLI 参数中传递：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack --mode=&apos;development&apos;</span><br></pre></td></tr></table></figure>
<ul>
<li>development : 会将DefinePlugin中的 process.env.NODE_ENV 的值设置为 development，为模块和 chunk启用有效的名</li>
<li>production： 会将 <code>DefinePlugin</code> 中 <code>process.env.NODE_ENV</code> 的值设置为 <code>production</code>。为模块和 chunk 启用确定性的混淆名称等</li>
<li>none: 不使用任何的默认优化选项</li>
</ul>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>一些需要了解的概念已经了解的差不多了， 那么接下来就是具体的配置项了。</p>
<p>webpack 是开箱即用的， 也就是说无需任何的配置文件，这种情况下webpack会假定项目的入口起点是 <code>src/index.js</code>，然后会在 <code>dist/main.js</code>中输出结果。并且在生产环境开启压缩和优化。</p>
<p>举个例子：</p>
<p>假如我们有这样的目录结构：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">|--src</span><br><span class="line">	 |--index.js</span><br></pre></td></tr></table></figure>
<p>我们在根目录命令行输入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack</span><br></pre></td></tr></table></figure>
<p>这时候我们发现跟目录多了一个文件夹<code>dist</code>，该文件夹里面有main.js。即目前的文件文件目录为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|--dist</span><br><span class="line">	 |--main.js</span><br><span class="line">|--src</span><br><span class="line">	 |--index.js</span><br></pre></td></tr></table></figure>
<p>所有可以看出不用做任何的配置就可以直接使用webpack。</p>
<p>虽然我们可以直接使用webpack来打包， 但是通常的情况下， 我们的项目都需要继续扩展能力，因此可以在根目录下创建 webpack.config.js 文件。 然后webpack 会自动使用它。</p>
<p>我们在根目录新建一个文件<code>webpack.config.js</code>。内容如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// 入口起点</span></span><br><span class="line">  entry: <span class="string">'./src/main.js'</span>,</span><br><span class="line">  <span class="comment">// 输出</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    <span class="comment">// 输出的文件的名字</span></span><br><span class="line">    filename: <span class="string">'shuliqi.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这配置文件，我们修改了入口起点。输出的文件名我们也改成<code>shuliqi.js</code>。然后我们在根目录执行命令：<code>webpack</code>. 最后我们会看到我们的文件目录是这样的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">|--dist</span><br><span class="line">	 |--shuliqi.js</span><br><span class="line">|--src</span><br><span class="line">	 |--main.js</span><br><span class="line">|--webpack.config.js</span><br></pre></td></tr></table></figure>
<p>由此可知，在根目录有webpack.config.js配置文件的话，输入<code>webpack</code>命令的时候会使用这个配置文件。</p>
<p>当然在某些特定的额情况下，需要根据实际情况使用不用的配置文件。webpack也可以使用不用的配置文件， 只需要在命令行中使用<code>--congig flag</code>修改配置文件名称。</p>
<p>我们新建一个文件<code>webpack.dev.js</code>,内容如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// webpack.dev.js配置的入口</span></span><br><span class="line">  entry: <span class="string">'./src/dev.js'</span>,</span><br><span class="line">  <span class="comment">// 输出</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    <span class="comment">// webpack.dev.js配置的输出的文件的名字</span></span><br><span class="line">    filename: <span class="string">'output-dev.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后我们在命令行执行：<code>webpack --config webpack.dev.js</code>。然后我们可以到打包之后的结果：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">|--dist</span><br><span class="line">	 |--output-dev.js</span><br><span class="line">|--src</span><br><span class="line">	 |--dev.js</span><br><span class="line">|--webpack.dev.js</span><br></pre></td></tr></table></figure>
<p>可以看到打包结果跟我们配置文件写的一样(打包之后输出的名字，打包的入口)。</p>
<h1 id="配置选项"><a href="#配置选项" class="headerlink" title="配置选项"></a>配置选项</h1><h2 id="上下文（context）"><a href="#上下文（context）" class="headerlink" title="上下文（context）"></a>上下文（context）</h2><p><strong>用法:</strong> <code>context: string</code></p>
<p><strong>概念：</strong> 基础路径，绝对路径，用于从配置文件中解析入口起点(entry)和加载器（loader）</p>
<p>入口对象是用于webpack查找看是构建bundle的地方。 上下文是入口文件所处的目录的绝对路径的字符串。</p>
<p>webpack 默认的上下文是当前的目录。 我们可以使用context修改上下文。</p>
<p>我们建一个文件夹，目录结构如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">|--app</span><br><span class="line">	 |--index.js</span><br><span class="line">|--webpack.config.js</span><br></pre></td></tr></table></figure>
<p>我们的配置文件webpack.config.js的内容如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// 将上下文修改为 当前绝对路径的app目录下面,我们的额入口起点将是在这个目录下面</span></span><br><span class="line">  <span class="comment">// ps:可以先注释注释点这个配置，如果这样打包是会报错的</span></span><br><span class="line">  context: path.resolve(__dirname, <span class="string">'app'</span>),</span><br><span class="line">  entry: <span class="string">'./index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'shuliqi.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果我们注释掉：<code>context: path.resolve(__dirname, &#39;app&#39;)。然后根目录命令:</code>webpack`。 这时候会报错：</p>
   <img src="/shuliqi.github.io/2020/05/15/从零学习webpack（一）/10.png">
<p>我们不注释 ` context: path.resolve(__dirname, ‘app’)的话， 是能正常打包的，正常打包的结果如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">|--dist</span><br><span class="line">	 |-- shuliqi.js</span><br><span class="line">|--src</span><br><span class="line">	 |--index.js</span><br><span class="line">|--webpack.config.js</span><br></pre></td></tr></table></figure>
<h2 id="入口（entry）-1"><a href="#入口（entry）-1" class="headerlink" title="入口（entry）"></a>入口（entry）</h2><p><a href="https://webpack.docschina.org/configuration/entry-context/#naming" target="_blank" rel="noopener">https://webpack.docschina.org/configuration/entry-context/#naming</a></p>
<h2 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h2><p>Web pack的核心的概念是一个模块打包工具，它的目标就是将js文件打包在一起， 打包后的文件用于浏览器。但是也能胜任转换，打包任何其他资源。</p>
<h2 id="Webpack项目"><a href="#Webpack项目" class="headerlink" title="Webpack项目"></a>Webpack项目</h2><p>新建一个项目<code>myWebpack</code>， 在项目里面我们添加index.html 和 index.js 文件。</p>
<p><strong>index.html</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    我是舒丽琦</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./dist/main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>index.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"我的名字是舒丽琦"</span>);</span><br></pre></td></tr></table></figure>
<h3 id="安装Webpack"><a href="#安装Webpack" class="headerlink" title="安装Webpack"></a>安装Webpack</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i webpack webpack-cli -D</span><br></pre></td></tr></table></figure>
<blockquote>
<p>-D 是 –save-dev– 的缩写， 表示在本地项目下安装<code>Webpack</code>。 i 是 install 的缩写。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i webpack webpack-cli -g</span><br></pre></td></tr></table></figure>
<blockquote>
<p>-g 表示全局安装</p>
</blockquote>
<h3 id="packge-json文件的生成"><a href="#packge-json文件的生成" class="headerlink" title="packge.json文件的生成"></a>packge.json文件的生成</h3><p>使用以下的命令生成<code>packge.json</code>文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm init</span><br></pre></td></tr></table></figure>
<p>生成的<code>packge.json</code>文件：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"mywebpack"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"license"</span>: <span class="string">"ISC"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Webpack打包"><a href="#Webpack打包" class="headerlink" title="Webpack打包"></a>Webpack打包</h3><p>使用命令进行打包：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npx webpack index.js</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li><p>其中npx webpack 是指在本项目目录下寻找webpack命令</p>
</li>
<li><p>index.js 表示打包的入口</p>
</li>
</ul>
</blockquote>
<p>打开index.html</p>
   <img src="/shuliqi.github.io/2020/05/15/从零学习webpack（一）/1.jpg">
<p>可以看出页面打印出了我们期望的log。</p>
<h3 id="添加配置文件"><a href="#添加配置文件" class="headerlink" title="添加配置文件"></a>添加配置文件</h3><p>在我们的目录下面新建一个<code>webpack.config.js</code>。 所以我们的项目结构是这样的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">| --- dist</span><br><span class="line">| --- index.js</span><br><span class="line">| --- packge.jspn</span><br><span class="line">| --- webpack.config.js</span><br><span class="line">| --- node_modules</span><br></pre></td></tr></table></figure>
<p>项目结构就已经完成了。现在编写<code>webpack.config.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    shuliqi: <span class="string">"./index.js"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">"index.js"</span>,</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">"dist"</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>配置说明：</p>
<ol>
<li><strong>entry</strong>：表示<code>Webpack</code>打包的入口, 指示<code>Webpack</code>应该使用哪个模块来作为其内部依赖图的开始。</li>
<li><strong>output</strong>：表示<code>Webpack</code>打包的出口。告诉了<code>Webpack</code>在哪里输出它所创建的bundles。以及如何命名这些文件。默认是放在<code>./dist</code>下面</li>
<li><strong>filename</strong>: 表示<code>Webpack</code>bundles的名称。这里表示叫index.js</li>
<li><strong>path</strong>: 表示示<code>Webpack</code>生成的bundles放到哪里。这里指放在本目录下面的dist 文件夹下面</li>
</ol>
<p>这里注意修改一些<code>index.html</code>里面饮入js 的文件名，改成</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"./dist/index.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="修改packge-json-文件"><a href="#修改packge-json-文件" class="headerlink" title="修改packge.json 文件"></a>修改packge.json 文件</h3><ol>
<li><strong>移除main字段</strong>： 因为我们使用<code>Webpack.config.js</code>来配置打包参数。 所以<code>package.json</code>里面的main我们就不需要了， 所以移除main字段</li>
<li><strong>添加script字段</strong>: 我们需要自己添加打包命令， 所以需要加上这个字段。</li>
</ol>
<p>修改后的packge.json文件如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"mywebpack"</span>,</span><br><span class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="string">"description"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"webpack"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"webpack"</span>: <span class="string">"^4.43.0"</span>,</span><br><span class="line">    <span class="string">"webpack-cli"</span>: <span class="string">"^3.3.11"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Webpack打包输出字段"><a href="#Webpack打包输出字段" class="headerlink" title="Webpack打包输出字段"></a>Webpack打包输出字段</h3><p>我们在script 字段中添加了一个命令 build。 当我们打包的时候， 只需要执行 <code>npm run build</code> 即可</p>
<blockquote>
<p><strong>npm run</strong>  表示一个运行的脚本。 而build 是我们的打包命令。</p>
</blockquote>
<p>我们执行命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run build</span><br></pre></td></tr></table></figure>
<p>打包后的目录如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">| --- dist</span><br><span class="line">|       | --- index.js</span><br><span class="line">| --- index.js</span><br><span class="line">| --- index.html</span><br><span class="line">| --- packge.jspn</span><br><span class="line">| --- webpack.config.js</span><br><span class="line">| --- node_modules</span><br></pre></td></tr></table></figure>
<p>执行打包命令之后， 在控制台上有一些内容的输出， 分贝是什么意思呢？</p>
 <img src="/shuliqi.github.io/2020/05/15/从零学习webpack（一）/3.png">
<ol>
<li><p><strong>Hash</strong>： 表示本次打包的唯一hash值， 每次打包的hash值是不一样的。</p>
</li>
<li><p><strong>Version</strong>: <code>Webpack</code>的版本。</p>
</li>
<li><p><strong>Time</strong>：这次打包的时间</p>
</li>
<li><p><strong>Asset</strong>： 打包出的文件的名称</p>
</li>
<li><p><strong>Size</strong>: 打包文件的大小</p>
</li>
<li><p><strong>Chunks</strong>： 打包后的js 文件的id 号。 从0 开始， 往后递增。</p>
</li>
<li><p><strong>Chunks Names</strong>： 打包的文件js文件的名字。这里是shuliqi。 为什么呢？ 是因为我们在配置的时候：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">entry: &#123;</span><br><span class="line">   shuliqi: <span class="string">"./index.js"</span>,</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Entrypoint index = index.js</strong>： 打包的入口。 index.js</p>
</li>
<li><p><strong>WARNING in configuration</strong>：提示的警告。这里是告诉我们我们没有给<code>webpaack.config.js</code>设置mode 属性。mode有三个值：</p>
<ul>
<li>development： 开发环境</li>
<li>production： 生产环境</li>
<li>mode：不是生产环境也是不是开发环境</li>
</ul>
</li>
</ol>
<p>我们给webpack.config.js加上mode属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    shuliqi: <span class="string">"./index.js"</span>, <span class="comment">// 入口文件</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">"index.js"</span>, <span class="comment">// 打包的文件名叫： index.js</span></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">"dist"</span>), <span class="comment">// 打包出来的文件放在项目的dist 中</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mode: <span class="string">"development"</span>, <span class="comment">// 开发环境</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="打包静态资源"><a href="#打包静态资源" class="headerlink" title="打包静态资源"></a>打包静态资源</h3><p>在<code>Webpack</code> 遇到非js文件时，可以使用loader 来处理文件，loader是一种打包规则。</p>
<p><code>Webapck</code>官方是这么说的：</p>
<blockquote>
<p>Loader 是让webpack 能够去处理非javascript文件（webpack本身只理解javascript）。loader 可以将所有类型的文件都转换成webpack能够处理成有效的模块。然后利用webpack的打包能力去处理这些文件</p>
</blockquote>
<p>loader的运用规则：</p>
<ol>
<li>使用<code>test</code> 正则来匹配相应的文件</li>
<li>使用<code>use</code>来添加文件对应的loader</li>
<li>对于有多个loader。 调用的次序是从左到右</li>
</ol>
<h4 id="loader-打包图片"><a href="#loader-打包图片" class="headerlink" title="loader 打包图片"></a>loader 打包图片</h4><p>打包图片的话我们需要用到<code>file-loader</code>, <code>url-loader</code>我么可以通过 <code>npm i</code>来安装</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i file-loader url-loader -D</span><br></pre></td></tr></table></figure>
<p><strong>webpack.config.js 图片配置：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    shuliqi: <span class="string">"./index.js"</span>, <span class="comment">// 入口文件</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/.jpg|png|gif$/</span>, <span class="comment">// 匹配jpg，png，gif类型的图片</span></span><br><span class="line">        use: [<span class="string">"file-loader"</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">"index.js"</span>, <span class="comment">// 打包的文件名叫： index.js</span></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">"dist"</span>), <span class="comment">// 打包出来的文件放在项目的dist 中</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mode: <span class="string">"development"</span>, <span class="comment">// 开发环境</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>index.js的改动</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">"我的名字是舒丽琦"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lazyLoad <span class="keyword">from</span> <span class="string">"./lazyload.jpg"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> root = <span class="built_in">document</span>.getElementById(<span class="string">"shuliqi"</span>);</span><br><span class="line"><span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</span><br><span class="line">img.src = lazyLoad;</span><br><span class="line">root.appendChild(img);</span><br></pre></td></tr></table></figure>
<p><strong>index.html的改动</strong></p>
<p>需要把index.html移动到dist 文件下面， 并且引入index.js的路径需要改一下。其次加一个id为shuliqi的div。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span> /&gt;</span><br><span class="line">    &lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    我是舒丽琦</span><br><span class="line">    &lt;div id=<span class="string">"shuliqi"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &lt;script src=<span class="string">"./index.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  &lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>
<p><strong>打包以及结果</strong></p>
<p>这时候我们执行打包命令：<code>npm run build</code>。</p>
<p>就可以得到这样的目录结构：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">| --- dist</span><br><span class="line">|       | --- index.js</span><br><span class="line">|       | --- 51d83ae69d23a6a1aba9eb2c83d0ac39.jpg</span><br><span class="line">|       | --- index.js</span><br><span class="line">| --- index.js</span><br><span class="line">| --- packge.jspn</span><br><span class="line">| --- webpack.config.js</span><br><span class="line">| --- node_modules</span><br></pre></td></tr></table></figure>
<p>我们打开index.html。 得到的是这样的结果：</p>
   <img src="/shuliqi.github.io/2020/05/15/从零学习webpack（一）/4.png">
<h5 id="占位符的应用"><a href="#占位符的应用" class="headerlink" title="占位符的应用"></a>占位符的应用</h5><p>我们以上的打包过程中， 打包出来的图片名字是一串乱码，我们有没有可以有一些设置可以是输出文件名的？ 答案是有的。那就是<strong>占位符</strong>了</p>
<p>占位符的规则：</p>
<ol>
<li><strong>[name]</strong>: 表示原文件的名字</li>
<li><strong>[ext]</strong>: 表示原文件的后缀</li>
<li><strong>[hash]</strong>： 表示打包的唯一的编码</li>
</ol>
<p>我们知道有这些规则之后，<code>file-loader</code> 提供的options 字段可以配置。可以移步去<a href="https://www.webpackjs.com/loaders/file-loader/" target="_blank" rel="noopener"><strong>了解webPack的file-loader</strong></a></p>
<p>那我们根据这个规则再来改写一下<code>webpack.config.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    shuliqi: <span class="string">"./index.js"</span>, <span class="comment">// 入口文件</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.jpg|png|gif$/</span>, <span class="comment">// 匹配jpg，png，gif类型的图片</span></span><br><span class="line">        use: &#123;</span><br><span class="line">          loader: <span class="string">"file-loader"</span>,</span><br><span class="line">          options: &#123;</span><br><span class="line">            name: <span class="string">"[name]-[hash].[ext]"</span>, <span class="comment">// 命名了打包出来的图片的名字</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">"index.js"</span>, <span class="comment">// 打包的文件名叫： index.js</span></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">"dist"</span>), <span class="comment">// 打包出来的文件放在项目的dist 中</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mode: <span class="string">"development"</span>, <span class="comment">// 开发环境</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>打包之后我们可以看到dist 目录下面的图片的名称：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">| --- dist</span><br><span class="line">|       | --- index.js</span><br><span class="line">|       | --- lazyload-51d83ae69d23a6a1aba9eb2c83d0ac39.jpg</span><br></pre></td></tr></table></figure>
<h5 id="压缩图片"><a href="#压缩图片" class="headerlink" title="压缩图片"></a>压缩图片</h5><p>在上面的例子我们可以看到打包出来的图片其实是比较大的。</p>
   <img src="/shuliqi.github.io/2020/05/15/从零学习webpack（一）/8.png">
<p>那有没有什么好的办法可以压缩图片呢？ <code>image-webpack-loader</code>就可以 ，可以移步去 <a href="https://www.npmjs.com/package/image-webpack-loader" target="_blank" rel="noopener"><strong>了解image-webpack-loader</strong></a></p>
<p>根据了解我们知道<code>image-webpack-loader</code>是可以压缩图片的，并且我们可以设置在debugger的时候不进行压缩</p>
<p><strong>修改webpack.config.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.jpg|png|gif$/</span>, <span class="comment">// 匹配jpg，png，gif类型的图片</span></span><br><span class="line">  use: [</span><br><span class="line">    &#123;</span><br><span class="line">      loader: <span class="string">"file-loader"</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        name: <span class="string">"[name]-[hash].[ext]"</span>, <span class="comment">// 命名了打包出来的图片的名字</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      loader: <span class="string">"image-webpack-loader"</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        bypassOnDebug: <span class="literal">true</span>, <span class="comment">// 在debug的时候不用压缩</span></span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong></p>
<p>我们再进行打包看看</p>
   <img src="/shuliqi.github.io/2020/05/15/从零学习webpack（一）/9.png">
<p>我们可以看出， 图片被压缩了了很多。</p>
<h4 id="loader-打包样式"><a href="#loader-打包样式" class="headerlink" title="loader 打包样式"></a>loader 打包样式</h4><p>每种样式文件， 需要不同的<code>loader</code>来处理</p>
<ol>
<li>普通的<code>.css</code>文件。 使用 <a href="http://www.fly63.com/article/detial/5741" target="_blank" rel="noopener"><strong>style-loader</strong></a> ，<a href="https://www.webpackjs.com/loaders/css-loader/" target="_blank" rel="noopener"><strong>css-loader</strong></a> 来处理</li>
<li><code>.styl</code>文件使用 <a href="https://www.npmjs.com/package/stylus-loader" target="_blank" rel="noopener"><strong>stylus-loader</strong></a>   <a href="https://www.npmjs.com/package/stylus-loader" target="_blank" rel="noopener"><strong>stylus-loader</strong></a>来处理</li>
<li><code>.sass</code>,.<code>scss</code>使用 <a href="https://www.npmjs.com/package/sass-loader" target="_blank" rel="noopener"><strong>sass-loader</strong></a>来处理</li>
<li><code>.less</code> 使用  <a href="https://www.npmjs.com/package/less-loader" target="_blank" rel="noopener"><strong>less-loader</strong></a> 来处理</li>
</ol>
<h5 id="打包-css文件"><a href="#打包-css文件" class="headerlink" title="打包.css文件"></a>打包.css文件</h5><p>假设我们要处理的文件是css文件。</p>
<p>那么我们先安装<code>style-loader</code>，<code>css-loader</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i style-loader css-loader -D</span><br></pre></td></tr></table></figure>
<p><strong>webpack.config.js</strong> 添加添加一个loader 规则</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: /.css$/,</span><br><span class="line">    use: ["style-loader", "css-loader"],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>添加一个css文件： index.css</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#shuliqi img &#123;</span><br><span class="line">    width: <span class="number">200</span>px;</span><br><span class="line">    height: <span class="number">300</span>px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>index.js</strong> 引入我们新加的css</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"./index.css"</span>;</span><br></pre></td></tr></table></figure>
<p><strong>打包</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>
<p>之后我们看看结果</p>
   <img src="/shuliqi.github.io/2020/05/15/从零学习webpack（一）/5.png">
<p>我们可以看出来，图片变小了。</p>
<h5 id="打包-sass-scss-的文件"><a href="#打包-sass-scss-的文件" class="headerlink" title="打包.sass , .scss 的文件"></a>打包.sass , .scss 的文件</h5><p>使用同样的方式我们可以打包sass 方式</p>
<p>首先先安装<code>sass-loader</code>  <code>node-loader</code></p>
<p><strong>Webpack.config.js</strong> 添加规则</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: /.(sass|scss)$/,</span><br><span class="line">    use: ["style-loader", "css-loader", "sass-loader"], // 从又到左的顺序转换</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p><strong>添加sass文件： index.sass</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">body </span><br><span class="line">  background: #00a1ff</span><br></pre></td></tr></table></figure>
<p>这里需要注意的是 sass后缀的话是不需要写花括号之类的，如果后缀名是scss 就跟我们平常写的css 风格一样</p>
<p><strong>index.js</strong>添加index.sass文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"./index.sass"</span>;</span><br></pre></td></tr></table></figure>
<p><strong>结果</strong></p>
   <img src="/shuliqi.github.io/2020/05/15/从零学习webpack（一）/6.png">
<p>我们可以看出sass设置的样式有效了</p>
<h5 id="css厂商前缀自动添加"><a href="#css厂商前缀自动添加" class="headerlink" title="css厂商前缀自动添加"></a>css厂商前缀自动添加</h5><p>当我们在<code>css</code>文件中写一些需要处理兼容性的样式的时候，需要我们分别对于不同的浏览器书添加不同的厂商前缀，使用 <a href="https://www.npmjs.com/package/postcss-loader" target="_blank" rel="noopener"><strong>postcss-loader</strong></a> 可以帮我们在<code>webpack</code>打包的时候自动添加这些厂商前缀。 自动添加厂商前缀需要<code>npm install</code>安装 <a href="https://www.npmjs.com/package/postcss-loader" target="_blank" rel="noopener"><strong>postcss-loader</strong></a> 和 <a href="https://www.npmjs.com/package/autoprefixer" target="_blank" rel="noopener"><strong>autoprefixer</strong></a>  </p>
<p><strong>postcss-loader有什么用？</strong></p>
<p>PostCSS 本身是一个功能比较单一的工具。它只是提供了一种方式用 JavaScript 代码来处理 CSS。它负责把 CSS 代码解析成抽象语法树结构（Abstract Syntax Tree，AST），再交由插件来进行处理。插件基于 CSS 代码的 AST 所能进行的操作是多种多样的，比如可以支持变量和混入（mixin），增加浏览器相关的声明前缀，或是把使用将来的 CSS 规范的样式规则转译（transpile）成当前的 CSS 规范支持的格式。</p>
<p><strong>autoprefixer有什么用？</strong></p>
<p>Autoprefixer解析CSS文件并且添加浏览器前缀到CSS规则里，使用Can I Use的数据来决定哪些前缀是需要的。</p>
<p><strong>安装postcss-loader 和 autoprefixer</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install postcss-loader autoprefixer -D</span><br></pre></td></tr></table></figure>
<p><strong>index.css</strong> 修改加一2D动画</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#shuliqi</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(10px);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>webpack.config.js</strong>添加 postcss-loader</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: /\.css$/,</span><br><span class="line">  use: ["style-loader", "css-loader", "postcss-loader"],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>添加<code>postcss.config.js</code></strong>，并添加代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: [<span class="built_in">require</span>(<span class="string">"autoprefixer"</span>)],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>： 这里有一点去要非常注意， 并不是我们上面的配置完了， 打包就可以有浏览器的后缀 了(这里踩了很长时间的坑)。 还需要我们在packge.json 里面写设置支持的浏览器，不然没效果。</p>
<p><strong>packge.json</strong>添加支持的浏览器</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"browserslist"</span>: [</span><br><span class="line">   <span class="string">"defaults"</span>,</span><br><span class="line">   <span class="string">"not ie &lt;= 8"</span>,</span><br><span class="line">   <span class="string">"last 2 versions"</span>,</span><br><span class="line">   <span class="string">"&gt; 1%"</span>,</span><br><span class="line">   <span class="string">"iOS &gt;= 7"</span>,</span><br><span class="line">   <span class="string">"Android &gt;= 4.0"</span></span><br><span class="line"> ]</span><br></pre></td></tr></table></figure>
<p>当然，你也可以直接在<code>postcss.config.js</code>文件里设置浏览器支持，比如这样，也是能成功给css属性加上前缀：</p>
<p>例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)(&#123;</span><br><span class="line">      browsers: [<span class="string">'Android &gt;= 4.0'</span>, <span class="string">'iOS &gt;= 7'</span>]</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> <strong>结果</strong>：这时候我们打包</p>
  <img src="/shuliqi.github.io/2020/05/15/从零学习webpack（一）/7.png">
<p>如图， 我们就知道浏览器后缀名加上了。</p>
<h5 id="css模块化打包"><a href="#css模块化打包" class="headerlink" title="css模块化打包"></a>css模块化打包</h5><p>css的模块化打包： 除非我引用你的样式， 否则你的样式不会影响到我。</p>
<h1 id="什么是webpack"><a href="#什么是webpack" class="headerlink" title="什么是webpack"></a>什么是webpack</h1></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">舒小琦</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://shuliqi.github.io/2020/05/15/从零学习webpack（一）/">https://shuliqi.github.io/2020/05/15/从零学习webpack（一）/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://shuliqi.github.io">舒小琦的Blog</a>！</span></div></div><div class="post-meta__tag-list"></div><nav id="pagination"><div class="prev-post pull-left"><a href="/shuliqi.github.io/2020/06/06/关于Delete`CR`eslint-prettier-prettier-报错的解决方案/"><i class="fa fa-chevron-left">  </i><span>关于Delete`CR`eslint(prettier/prettier) 报错的解决方案</span></a></div><div class="next-post pull-right"><a href="/shuliqi.github.io/2020/04/21/MutationObserver-监听DOM树变化/"><span>MutationObserver 追踪DOM的变化</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2021 By 舒小琦</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/shuliqi.github.io/js/utils.js?version=1.6.1"></script><script src="/shuliqi.github.io/js/fancybox.js?version=1.6.1"></script><script src="/shuliqi.github.io/js/sidebar.js?version=1.6.1"></script><script src="/shuliqi.github.io/js/copy.js?version=1.6.1"></script><script src="/shuliqi.github.io/js/fireworks.js?version=1.6.1"></script><script src="/shuliqi.github.io/js/transition.js?version=1.6.1"></script><script src="/shuliqi.github.io/js/scroll.js?version=1.6.1"></script><script src="/shuliqi.github.io/js/head.js?version=1.6.1"></script><script src="/shuliqi.github.io/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>