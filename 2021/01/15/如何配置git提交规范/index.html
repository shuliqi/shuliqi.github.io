<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="git提交规范及如何配置"><meta name="keywords" content="工程配置"><meta name="author" content="舒丽琦"><meta name="copyright" content="舒丽琦"><title>git提交规范及如何配置 | 舒丽琦的Blog</title><link rel="shortcut icon" href="http://s3.qhres.com/static/2ff15e92f72e1a0b.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '5.4.0'
} </script><meta name="generator" content="Hexo 5.4.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Git-Commit-%E8%A7%84%E8%8C%83"><span class="toc-number">1.</span> <span class="toc-text">Git Commit  规范</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Header"><span class="toc-number">1.1.</span> <span class="toc-text">Header</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#type"><span class="toc-number">1.1.1.</span> <span class="toc-text">type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scope"><span class="toc-number">1.1.2.</span> <span class="toc-text">scope</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#subject"><span class="toc-number">1.1.3.</span> <span class="toc-text">subject</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Body"><span class="toc-number">1.2.</span> <span class="toc-text">Body</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Footer"><span class="toc-number">1.3.</span> <span class="toc-text">Footer</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E5%85%BC%E5%AE%B9%E5%8F%98%E5%8A%A8"><span class="toc-number">1.3.1.</span> <span class="toc-text">不兼容变动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E9%97%ADIssue"><span class="toc-number">1.3.2.</span> <span class="toc-text">关闭Issue</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Revert"><span class="toc-number">1.4.</span> <span class="toc-text">Revert</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BE%E4%B8%AA%E4%BE%8B%E5%AD%90"><span class="toc-number">1.5.</span> <span class="toc-text">举个例子</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-git-%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83"><span class="toc-number">2.</span> <span class="toc-text">配置 git 提交规范</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Commitizen"><span class="toc-number">2.1.</span> <span class="toc-text">Commitizen</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cz-customizable"><span class="toc-number">2.2.</span> <span class="toc-text">cz-customizable</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Commitizen%E6%A0%A1%E9%AA%8C"><span class="toc-number">2.3.</span> <span class="toc-text">Commitizen校验</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#git-commit-%E8%A7%A6%E5%8F%91-git-cz"><span class="toc-number">3.</span> <span class="toc-text">git commit 触发 git cz</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="http://p6.qhimg.com/t01f5a5270b7946b505.jpg"></div><div class="author-info__name text-center">舒丽琦</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">52</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">11</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">12</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/webp.webp)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">舒丽琦的Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">首页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a><a class="site-page" href="/about">关于</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">git提交规范及如何配置</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-01-15</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%B7%A5%E7%A8%8B%E9%85%8D%E7%BD%AE/">工程配置</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p><code>Git</code> 是现在比较流行的版本控制工具，在开发的过程中，<code>Git </code>每次提交代码，都需要写<code>Commit message </code>（即提交说明）。如果没有对 <code>Commit message </code>进行规范，会造成很多的麻烦，比如：</p>
<ul>
<li>每个人的 <code>Commit message </code>风格不同，格式凌乱，查看就换个不方便</li>
<li>有一些commit  没有写 <code>message</code>，事后就很难知道对应修改的作用。</li>
</ul>
<p> 所以说规范的 Commit <code>message </code>是很有必要的。也是有很多的好处的，比如：</p>
<ul>
<li>可以统一团队的<code>Git commit </code>日志风格</li>
<li>方便日后查阅， <code>Reviewing Code</code>等</li>
<li>可以帮助我们写好 <code>Changelog</code></li>
<li>能提升项目的整体质量</li>
</ul>
 <span id="more"></span>

<p>我们要配置<code>git</code>提交规范的话， 肯定需要知道它的规范是什么？先来看<code>Git Commit</code> 规范 是什么？</p>
<h1 id="Git-Commit-规范"><a href="#Git-Commit-规范" class="headerlink" title="Git Commit  规范"></a>Git Commit  规范</h1><p>目前规范使用较多的是 <a target="_blank" rel="noopener" href="https://www.barretlee.com/blog/2019/10/28/commit-convention/">Angular 团队得规范</a> 我们也叫这种规范做: <strong>Git 约定式提交规范</strong>。</p>
<p>这种规范提供了一中轻量级的的提交历史编写规则，它的内容十分的简单:</p>
<p>它包含了三个部分：<code>Heade</code>r，<code>Body</code>，<code>Footer</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注意冒号 : 后有空格</span></span><br><span class="line">&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br><span class="line"><span class="comment">//  空一行</span></span><br><span class="line">&lt;body&gt;</span><br><span class="line"><span class="comment">// 空一行</span></span><br><span class="line">&lt;footer&gt;</span><br></pre></td></tr></table></figure>

<p>其中，<code>Header</code> 是必需的，<code>Body</code> 和<code> Footer</code> 可以省略。</p>
<blockquote>
<p><strong>注意：</strong> 不管是哪一个部分，任何一行都不得操作72个字符（或者100个字符）。 当然， 这只是避免自动换行影响美观而已。</p>
</blockquote>
<h2 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h2><p><code>Header</code> 部分 只有一行，包括三个字段：**<code>type(必填</code>)<strong>，</strong><code>scope(可选)</code><strong>，</strong><code>subject(必填)</code>**</p>
<h3 id="type"><a href="#type" class="headerlink" title="type"></a>type</h3><p><code>type</code> 字段用于说明<code> commit</code> 的类别，它允许使用下面的标识</p>
<ul>
<li><p><code>feat</code>：新功能（<code>feature</code>）</p>
</li>
<li><p><code>fix</code>： 修改<code>bug</code></p>
</li>
<li><p><code>docs</code>：文档（<code>documentation</code>）</p>
</li>
<li><p><code>style</code>：格式（不影响代码运行的变动）</p>
</li>
<li><p><code>refactor</code>：重构（即不是新增功能，也不是修改<code>bug</code>的代码变动）</p>
</li>
<li><p><code>test</code>：增加测试</p>
</li>
<li><p><code>chore</code>：构建过程或者辅助工具的变动</p>
</li>
</ul>
<h3 id="scope"><a href="#scope" class="headerlink" title="scope"></a>scope</h3><p><code>scope </code>用于说明  <code>commit </code>的影响范围，比如： 数据层，控制层，视图层等等。因具体项目而定。</p>
<h3 id="subject"><a href="#subject" class="headerlink" title="subject"></a>subject</h3><p><code>subject </code>用于说明 <code>commit</code> 目的的简短描述，最好不要操作50 个字符。我们在写<code>ubject</code>的时候需要注意：</p>
<ul>
<li>以动词开头，使用第一人称现在时，比如：<code>change</code>，而不是<code>changed</code> 或者 <code>changes</code></li>
<li>第一个字母小写</li>
<li>结尾不加句号</li>
</ul>
<h2 id="Body"><a href="#Body" class="headerlink" title="Body"></a>Body</h2><p><code>Body</code> 部分是对本次 <code>commit</code> 的详细描述，可以分成多行。写Body 部分的时候也需要注意：</p>
<ul>
<li>使用第一人称现在时候， 比如使用 <code>change</code> 而不是 <code>changed</code> 或 <code>changes</code></li>
<li>应该说明代码变动的动机，以及与以前行为的对比</li>
</ul>
<h2 id="Footer"><a href="#Footer" class="headerlink" title="Footer"></a>Footer</h2><p>Footer 部分只用于这两种情况：</p>
<h3 id="不兼容变动"><a href="#不兼容变动" class="headerlink" title="不兼容变动"></a>不兼容变动</h3><p>如果当前的代码与上一版本不兼容，则<code>Footer</code> 部分以<code> BREAKING CHANGE</code> 开头， 后面是对变动的描述，以及变动的理由和迁移的办法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">BREAKING CHANGE: isolate scope bindings definition has changed.</span><br><span class="line"></span><br><span class="line">    To migrate the code follow the example below:</span><br><span class="line"></span><br><span class="line">    Before:</span><br><span class="line"></span><br><span class="line">    scope: &#123;</span><br><span class="line">      <span class="attr">myAttr</span>: <span class="string">&#x27;attribute&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="attr">After</span>:</span><br><span class="line"></span><br><span class="line">    scope: &#123;</span><br><span class="line">      <span class="attr">myAttr</span>: <span class="string">&#x27;@&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    The removed <span class="string">`inject`</span> wasn<span class="string">&#x27;t generaly useful for directives so there should be no code using it.</span></span><br></pre></td></tr></table></figure>

<h3 id="关闭Issue"><a href="#关闭Issue" class="headerlink" title="关闭Issue"></a>关闭Issue</h3><p>如果当前的<code>commit</code> 是针对某个<code> issue</code>。那么在<code>footer</code>部分关闭这个<code>iissue</code>。可以一次性关系多个<code>issue</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">closes #<span class="number">123</span>, #<span class="number">245</span>, #<span class="number">992</span></span><br></pre></td></tr></table></figure>



<h2 id="Revert"><a href="#Revert" class="headerlink" title="Revert"></a>Revert</h2><p> 有一种特殊情况， 如果当前的<code>commit</code> 是用于撤销 以前的``commit <code>的，则必须以</code>Revert <code>开头。 后面紧跟着被撤销的</code>Commit<code>的</code>Header`。</p>
<p><code>Body</code>部分的格式是固定的，必须写成<code>This reverts commit &lt;hash&gt;.</code>，其中的<code>hash</code>是被撤销<code>commit</code>的 <code>SHA</code> 标识符。</p>
<p>如果当前<code> commit</code> 与被撤销的<code>commit</code>，在同一个发布（<code>release</code>）里面，那么它们都不会出现在 <code>Change log</code> 里面。如果两者在不同的发布，那么当前 <code>commit</code>，会出现在 <code>Change log</code> 的<code>Reverts</code>小标题下面。</p>
<h2 id="举个例子"><a href="#举个例子" class="headerlink" title="举个例子"></a>举个例子</h2><p>我们新建一个文件夹:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir  gitCommit</span><br></pre></td></tr></table></figure>

<p>然后进入到这个文件夹:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd gitCommit</span><br></pre></td></tr></table></figure>

<p>执行：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure>

<p>新建一个文件: </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch index.js</span><br></pre></td></tr></table></figure>

<p>执行:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add</span><br></pre></td></tr></table></figure>



<p>这时候我们开始写提交的<code>commit message</code>，命令行输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit</span><br></pre></td></tr></table></figure>

<p>这时候会跳出编辑器让我们编写<code> message</code>， 我们则可以写成：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">feat:(*): 添加index.js文件</span><br><span class="line"></span><br><span class="line">在根目录添加了indexjs文件</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这<code>commit message</code>的 <code>Header</code> 为<code> feat:(*): 添加index.js文件</code>），表示：我们加了一个新功能（<code>type = feat</code>），它的影响范围是*（<code>scope = </code>*）, 它的简短描述(<code>subject</code>)是：添加<code>index.js</code>文件</p>
<p>这<code>commit message</code> 的<code> Body</code> 为： <code> 在根目录添加了indexjs文件</code>。表示这次的<code>commit</code> 的简单描述是： <code> 在根目录添加了indexjs文件</code></p>
<p>如果我们要撤销上面的 <code>commit</code> 。 我们这可以 使用 <code>git revert &lt;commitId&gt;</code></p>
<p>我们可以下先使用 <code>git log</code>, 找出要 revert 的 commitId 0（f6c37576c793b2e2f4e66a87f96c2e825e073d35）</p>
<p>然后执行：<code>git revert f6c37576c793b2e2f4e66a87f96c2e825e073d35</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Revert <span class="string">&quot;feat:(*): 添加index.js文件&quot;</span></span><br><span class="line"></span><br><span class="line">This reverts commit f6c37576c793b2e2f4e66a87f96c2e825e073d35.</span><br></pre></td></tr></table></figure>

<p>这是的提交规范是这样的，已经默认帮我们写好了。当然我们也是可以修改的。</p>
<h1 id="配置-git-提交规范"><a href="#配置-git-提交规范" class="headerlink" title="配置 git 提交规范"></a>配置 git 提交规范</h1><p>当然，在我们的日常开发当中， 需要记住上面的规范， 有点繁琐。我们的目标还是要通过工具生成和约束。 那么我们现在就来配置吧！</p>
<h2 id="Commitizen"><a href="#Commitizen" class="headerlink" title="Commitizen"></a>Commitizen</h2><p>那么有什么 工具可以 做到生成规范并且约束呢？ <a target="_blank" rel="noopener" href="https://github.com/commitizen/cz-cli">Commitizen</a>就是一个很不错的， 很合格的工具，</p>
<p><code>Commitizen/cz-cli</code>: 是一个格式化 <code>commit message</code> 的工具，可以约束提交者按照制定的规范一步一步的填写 <code>commit message</code>。</p>
<p><strong>安装</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install commitizen --save</span><br></pre></td></tr></table></figure>

<p>然后在项目的根目录里， 执行以下的命令，使其支持<code>Angular</code> 的 <code>commit message</code> 格式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">commitizen init cz-conventional-changelog --save --save-exact</span><br></pre></td></tr></table></figure>

<p><strong>配置</strong></p>
<p>我们打开<code> packge.json</code>。 可以看到配置为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;config&quot;: &#123;</span><br><span class="line">  &quot;commitizen&quot;: &#123;</span><br><span class="line">    &quot;path&quot;: &quot;./node_modules/cz-conventional-changelog&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>之后，只要是用到 <code>git commit </code>命令，一律改为使用 <code>git cz</code>， 然后就会出现选项， 用来生成符合格式的 <code>commit message</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">git cz</span><br><span class="line"></span><br><span class="line">cz-cli@<span class="number">4.2</span><span class="number">.3</span>, cz-conventional-changelog@<span class="number">3.3</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line">? Select the type <span class="keyword">of</span> change that you<span class="string">&#x27;re committing: (Use arrow keys)</span></span><br><span class="line"><span class="string">❯ feat:     A new feature </span></span><br><span class="line"><span class="string">  fix:      A bug fix </span></span><br><span class="line"><span class="string">  docs:     Documentation only changes </span></span><br><span class="line"><span class="string">  style:    Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc) </span></span><br><span class="line"><span class="string">  refactor: A code change that neither fixes a bug nor adds a feature </span></span><br><span class="line"><span class="string">  perf:     A code change that improves performance </span></span><br><span class="line"><span class="string">  test:     Adding missing tests or correcting existing tests </span></span><br></pre></td></tr></table></figure>

<h2 id="cz-customizable"><a href="#cz-customizable" class="headerlink" title="cz-customizable"></a>cz-customizable</h2><p>上面是直接使用 <code>cz-conventional-changelog</code> 作为 Adapter。但是如果需要自定义<code> Adapter</code>， 比如：默认提交的<code>types </code>非常多；或者有些使用我们可能只需要其中的某些<code>type</code>。或者自定义一些<code>type</code>，那么就可以通过 <code>cz-customizable</code> 来自定义了。</p>
<p><strong>安装</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i cz-customizable --save</span><br></pre></td></tr></table></figure>

<p>将之前符合<code>Angular</code>规范的**<code>cz-conventional-changelog</code><strong>适配器路径改成</strong><code>cz-customizable</code>**适配器路径：  **”<code>path</code>“: “<code>./node_modules/cz-conventional-changelog</code>“ **改成  <strong>“<code>path</code>“: “<code>./node_modules/cz-customizable</code>“</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;config&quot;</span>: &#123;</span><br><span class="line">   <span class="string">&quot;commitizen&quot;</span>: &#123;</span><br><span class="line">     <span class="string">&quot;path&quot;</span>: <span class="string">&quot;./node_modules/cz-customizable&quot;</span></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>

<p><strong>配置</strong></p>
<p>在跟目录下新建.<code>cz-config.js</code>。 内容的示例文件如：<a target="_blank" rel="noopener" href="https://github.com/leonardoanalista/cz-customizable/blob/master/cz-config-EXAMPLE.js">cz-config-EXAMPLE.js</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">types</span>: [</span><br><span class="line">    &#123;<span class="attr">value</span>: <span class="string">&#x27;feat&#x27;</span>,     <span class="attr">name</span>: <span class="string">&#x27;feat:     A new feature&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">value</span>: <span class="string">&#x27;fix&#x27;</span>,      <span class="attr">name</span>: <span class="string">&#x27;fix:      A bug fix&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">value</span>: <span class="string">&#x27;docs&#x27;</span>,     <span class="attr">name</span>: <span class="string">&#x27;docs:     Documentation only changes&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">value</span>: <span class="string">&#x27;style&#x27;</span>,    <span class="attr">name</span>: <span class="string">&#x27;style:    Changes that do not affect the meaning of the code\n            (white-space, formatting, missing semi-colons, etc)&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">value</span>: <span class="string">&#x27;refactor&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;refactor: A code change that neither fixes a bug nor adds a feature&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">value</span>: <span class="string">&#x27;perf&#x27;</span>,     <span class="attr">name</span>: <span class="string">&#x27;perf:     A code change that improves performance&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">value</span>: <span class="string">&#x27;test&#x27;</span>,     <span class="attr">name</span>: <span class="string">&#x27;test:     Adding missing tests&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">value</span>: <span class="string">&#x27;chore&#x27;</span>,    <span class="attr">name</span>: <span class="string">&#x27;chore:    Changes to the build process or auxiliary tools\n            and libraries such as documentation generation&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">value</span>: <span class="string">&#x27;revert&#x27;</span>,   <span class="attr">name</span>: <span class="string">&#x27;revert:   Revert to a commit&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">value</span>: <span class="string">&#x27;WIP&#x27;</span>,      <span class="attr">name</span>: <span class="string">&#x27;WIP:      Work in progress&#x27;</span>&#125;</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  <span class="attr">scopes</span>: [</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">&#x27;accounts&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">&#x27;admin&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">&#x27;exampleScope&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">&#x27;changeMe&#x27;</span>&#125;</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// it needs to match the value for field type. Eg.: &#x27;fix&#x27;</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  scopeOverrides: &#123;</span></span><br><span class="line"><span class="comment">    fix: [</span></span><br><span class="line"><span class="comment">      &#123;name: &#x27;merge&#x27;&#125;,</span></span><br><span class="line"><span class="comment">      &#123;name: &#x27;style&#x27;&#125;,</span></span><br><span class="line"><span class="comment">      &#123;name: &#x27;e2eTest&#x27;&#125;,</span></span><br><span class="line"><span class="comment">      &#123;name: &#x27;unitTest&#x27;&#125;</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">  &#125;,</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="comment">// override the messages, defaults are as follows</span></span><br><span class="line">  <span class="attr">messages</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;Select the type of change that you\&#x27;re committing:&#x27;</span>,</span><br><span class="line">    <span class="attr">scope</span>: <span class="string">&#x27;\nDenote the SCOPE of this change (optional):&#x27;</span>,</span><br><span class="line">    <span class="comment">// used if allowCustomScopes is true</span></span><br><span class="line">    <span class="attr">customScope</span>: <span class="string">&#x27;Denote the SCOPE of this change:&#x27;</span>,</span><br><span class="line">    <span class="attr">subject</span>: <span class="string">&#x27;Write a SHORT, IMPERATIVE tense description of the change:\n&#x27;</span>,</span><br><span class="line">    <span class="attr">body</span>: <span class="string">&#x27;Provide a LONGER description of the change (optional). Use &quot;|&quot; to break new line:\n&#x27;</span>,</span><br><span class="line">    <span class="attr">breaking</span>: <span class="string">&#x27;List any BREAKING CHANGES (optional):\n&#x27;</span>,</span><br><span class="line">    <span class="attr">footer</span>: <span class="string">&#x27;List any ISSUES CLOSED by this change (optional). E.g.: #31, #34:\n&#x27;</span>,</span><br><span class="line">    <span class="attr">confirmCommit</span>: <span class="string">&#x27;Are you sure you want to proceed with the commit above?&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">allowCustomScopes</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">allowBreakingChanges</span>: [<span class="string">&#x27;feat&#x27;</span>, <span class="string">&#x27;fix&#x27;</span>],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// limit subject length</span></span><br><span class="line">  <span class="attr">subjectLimit</span>: <span class="number">100</span></span><br><span class="line">  </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>我们可以对这个配置进行汉化处理：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// type 类型</span></span><br><span class="line">  <span class="attr">types</span>: [</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;feat&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;feat:     新增产品功能&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;fix&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;fix:      修复 bug&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;docs&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;docs:     文档的变更&#x27;</span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">value</span>: <span class="string">&#x27;style&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>:</span><br><span class="line">        <span class="string">&#x27;style:    不改变代码功能的变动(如删除空格、格式化、去掉末尾分号等)&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">value</span>: <span class="string">&#x27;refactor&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;refactor: 重构代码。不包括 bug 修复、功能新增&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">value</span>: <span class="string">&#x27;perf&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;perf:     性能优化&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;test&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;test:     添加、修改测试用例&#x27;</span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">value</span>: <span class="string">&#x27;build&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;build:    构建流程、外部依赖变更，比如升级 npm 包、修改 webpack 配置&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;ci&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;ci:       修改了 CI 配置、脚本&#x27;</span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">value</span>: <span class="string">&#x27;chore&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;chore:    对构建过程或辅助工具和库的更改,不影响源文件、测试用例的其他操作&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="attr">value</span>: <span class="string">&#x27;revert&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;revert:   回滚 commit&#x27;</span> &#125;,</span><br><span class="line"></span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// scope 类型，针对 React 项目</span></span><br><span class="line">  <span class="attr">scopes</span>: [</span><br><span class="line">    [<span class="string">&#x27;components&#x27;</span>, <span class="string">&#x27;组件相关&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;hooks&#x27;</span>, <span class="string">&#x27;hook 相关&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;hoc&#x27;</span>, <span class="string">&#x27;HOC&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;utils&#x27;</span>, <span class="string">&#x27;utils 相关&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;antd&#x27;</span>, <span class="string">&#x27;对 antd 主题的调整&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;element-ui&#x27;</span>, <span class="string">&#x27;对 element-ui 主题的调整&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;styles&#x27;</span>, <span class="string">&#x27;样式相关&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;deps&#x27;</span>, <span class="string">&#x27;项目依赖&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;auth&#x27;</span>, <span class="string">&#x27;对 auth 修改&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;other&#x27;</span>, <span class="string">&#x27;其他修改&#x27;</span>],</span><br><span class="line">    <span class="comment">// 如果选择 custom ,后面会让你再输入一个自定义的 scope , 也可以不设置此项， 把后面的 allowCustomScopes 设置为 true</span></span><br><span class="line">    [<span class="string">&#x27;custom&#x27;</span>, <span class="string">&#x27;以上都不是？我要自定义&#x27;</span>],</span><br><span class="line">  ].map(<span class="function">(<span class="params">[value, description]</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      value,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">`<span class="subst">$&#123;value.padEnd(<span class="number">30</span>)&#125;</span> (<span class="subst">$&#123;description&#125;</span>)`</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// allowTicketNumber: false,</span></span><br><span class="line">  <span class="comment">// isTicketNumberRequired: false,</span></span><br><span class="line">  <span class="comment">// ticketNumberPrefix: &#x27;TICKET-&#x27;,</span></span><br><span class="line">  <span class="comment">// ticketNumberRegExp: &#x27;\\d&#123;1,5&#125;&#x27;,</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 可以设置 scope 的类型跟 type 的类型匹配项，例如: &#x27;fix&#x27;</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">    scopeOverrides: &#123;</span></span><br><span class="line"><span class="comment">      fix: [</span></span><br><span class="line"><span class="comment">        &#123; name: &#x27;merge&#x27; &#125;,</span></span><br><span class="line"><span class="comment">        &#123; name: &#x27;style&#x27; &#125;,</span></span><br><span class="line"><span class="comment">        &#123; name: &#x27;e2eTest&#x27; &#125;,</span></span><br><span class="line"><span class="comment">        &#123; name: &#x27;unitTest&#x27; &#125;</span></span><br><span class="line"><span class="comment">      ]</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="comment">// 覆写提示的信息</span></span><br><span class="line">  <span class="attr">messages</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;请确保你的提交遵循了原子提交规范！\n选择你要提交的类型:&quot;</span>,</span><br><span class="line">    <span class="attr">scope</span>: <span class="string">&#x27;\n选择一个 scope (可选):&#x27;</span>,</span><br><span class="line">    <span class="comment">// 选择 scope: custom 时会出下面的提示</span></span><br><span class="line">    <span class="attr">customScope</span>: <span class="string">&#x27;请输入自定义的 scope:&#x27;</span>,</span><br><span class="line">    <span class="attr">subject</span>: <span class="string">&#x27;填写一个简短精炼的描述语句:\n&#x27;</span>,</span><br><span class="line">    <span class="attr">body</span>: <span class="string">&#x27;添加一个更加详细的描述，可以附上新增功能的描述或 bug 链接、截图链接 (可选)。使用 &quot;|&quot; 换行:\n&#x27;</span>,</span><br><span class="line">    <span class="attr">breaking</span>: <span class="string">&#x27;列举非兼容性重大的变更 (可选):\n&#x27;</span>,</span><br><span class="line">    <span class="attr">footer</span>: <span class="string">&#x27;列举出所有变更的 ISSUES CLOSED  (可选)。 例如.: #31, #34:\n&#x27;</span>,</span><br><span class="line">    <span class="attr">confirmCommit</span>: <span class="string">&#x27;确认提交?&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 是否允许自定义填写 scope ，设置为 true ，会自动添加两个 scope 类型 [&#123; name: &#x27;empty&#x27;, value: false &#125;,&#123; name: &#x27;custom&#x27;, value: &#x27;custom&#x27; &#125;]</span></span><br><span class="line">  <span class="comment">// allowCustomScopes: true,</span></span><br><span class="line">  <span class="attr">allowBreakingChanges</span>: [<span class="string">&#x27;feat&#x27;</span>, <span class="string">&#x27;fix&#x27;</span>],</span><br><span class="line">  <span class="comment">// skip any questions you want</span></span><br><span class="line">  <span class="comment">// skipQuestions: [],</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// subject 限制长度</span></span><br><span class="line">  <span class="attr">subjectLimit</span>: <span class="number">100</span>,</span><br><span class="line">  <span class="comment">// breaklineChar: &#x27;|&#x27;, // 支持 body 和 footer</span></span><br><span class="line">  <span class="comment">// footerPrefix : &#x27;ISSUES CLOSED:&#x27;</span></span><br><span class="line">  <span class="comment">// askForBreakingChangeFirst : true,</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>到此， 我们使用 <code>cz-customizable</code>  就自定义配置完了。</p>
<p>最后我们使用 <code>git cz</code>命令进行提交说明：</p>
   <img src="/2021/01/15/%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AEgit%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83/1.png" class="">

<p>上图我们就可以看出此时的提交说明已经汉化， 我们继续写提交说明：</p>
   <img src="/2021/01/15/%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AEgit%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83/2.png" class="">

<p>最后我们提交到远端看到效果如下：</p>
  <img src="/2021/01/15/%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AEgit%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83/3.png" class="">



<h2 id="Commitizen校验"><a href="#Commitizen校验" class="headerlink" title="Commitizen校验"></a>Commitizen校验</h2><p>我们前面已经约束了一套代码规范提交说明了， 但是还是有人不按照规范提交代码说明怎么呢？， 那么就需要 <a target="_blank" rel="noopener" href="https://github.com/marionebl/commitlint">commitlint</a>来校验 commit 了。</p>
<p><strong>安装commitlint</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev @commitlint/cli</span><br></pre></td></tr></table></figure>

<p><strong>安装@commitlint/config-conventional</strong></p>
<p>安装符合<code>Abgular</code>风格校验规则：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev @commitlint/config-conventional</span><br></pre></td></tr></table></figure>

<p>然后在项目中新建 <code>commitlint.config.js</code>文件，并且设置校验规则：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&#x27;@commitlint/config-conventional&#x27;</span>]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>安装安装huksy（git钩子工具）</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install husky --save-dev</span><br></pre></td></tr></table></figure>

<p>然后在packge.json 中配置 <code>git commit</code>提交时的钩子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;husky&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;hooks&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;commit-msg&quot;</span>: <span class="string">&quot;commitlint -E HUSKY_GIT_PARAMS&quot;</span></span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>需要注意</strong>，使用该校验规则不能对<code>.cz-config.js</code>进行不符合<code>Angular</code>规范的定制处理，例如之前的汉化，此时需要将<code>.cz-config.js</code>的文件按照官方示例文件<a target="_blank" rel="noopener" href="https://github.com/leonardoanalista/cz-customizable/blob/master/cz-config-EXAMPLE.js">cz-config-EXAMPLE.js</a>进行符合<code>Angular</code>风格的改动。</p>
<p>最后我们来试一试：</p>
<p>提交不符合规范的错误提示：</p>
  <img src="/2021/01/15/%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AEgit%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83/4.png" class="">

<p>提交符合规范的提示：</p>
  <img src="/2021/01/15/%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AEgit%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83/5.png" class="">



<p><strong>需要注意</strong>：如果使用了 <strong>cz-customizable</strong>配器做了破坏<code>Angular</code>风格的提交说明配置，那么不能使用**@commitlint/config-conventional**规则进行提交说明校验，可以使用<a target="_blank" rel="noopener" href="https://github.com/whizark/commitlint-config-cz">commitlint-config-cz</a>对定制化提交说明进行校验。</p>
<p><strong>安装：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install commitlint-config-cz --save-dev</span><br></pre></td></tr></table></figure>

<p>然后加入<code>commitlint</code>校验规则配置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">extends</span>: [</span><br><span class="line">    <span class="string">&#x27;cz&#x27;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>这里推荐使用**@commitlint/config-conventional**校验规则，如果想使用<code>cz-customizable</code>适配器，那么定制化的配置不要破坏Angular规范即可。</p>
</blockquote>
<h1 id="git-commit-触发-git-cz"><a href="#git-commit-触发-git-cz" class="headerlink" title="git commit 触发 git cz"></a>git commit 触发 git cz</h1><p>在提交的时候，我们都习惯了 <code>git commit</code> ，虽然换成 <code>git cz</code> 不难，但是如果让开发者在 <code>git commit</code> 时无感知的触发 <code>git cz</code> 肯定是更好的， 而且也能避免不熟悉项目的人直接 <code>git commit</code> 提交一些不符合规范的信息。</p>
<p>我们可以在<code>husky.config.js</code>中设置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;hooks&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;prepare-commit-msg&quot;</span>: <span class="string">&quot;exec &lt; /dev/tty &amp;&amp; git cz --hook || true&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>











<p><strong>参考文档：</strong></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6854573220176068615">让你的commit更有价值</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/leoforfree/cz-customizable">cz-customizable</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/commitizen/cz-cli">cz-cli</a></p>
<p><a target="_blank" rel="noopener" href="https://www.barretlee.com/blog/2019/10/28/commit-convention/">小胡子哥的个人博客</a></p>
<p><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html">Commit message 和 Change log 编写指南</a></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">舒丽琦</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://shuliqi.github.io/2021/01/15/如何配置git提交规范/">https://shuliqi.github.io/2021/01/15/如何配置git提交规范/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://shuliqi.github.io">舒丽琦的Blog</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%B7%A5%E7%A8%8B%E9%85%8D%E7%BD%AE/">工程配置</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2021/03/06/webpack%E5%AD%A6%E4%B9%A0-%E4%BC%98%E5%8C%96%EF%BC%88optimization%EF%BC%89/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96/"><i class="fa fa-chevron-left">  </i><span>Javascript模块化编程总结</span></a></div><div class="next-post pull-right"><a href="/2020/12/04/CSS-Grid%E7%BD%91%E6%A0%BC%E5%B8%83%E5%B1%80/"><span>CSS Grid网格布局</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(/webp.webp)"><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2021 By 舒丽琦</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>